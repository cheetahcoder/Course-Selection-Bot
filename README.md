# ربات تلگرام انتخاب واحد

این یک ربات تلگرامی است که برای کمک به دانشجویان در فرآیند انتخاب واحد و ارائه گزارش‌های کاربردی به مدیران طراحی شده است. کاربران می‌توانند در ربات ثبت‌نام کرده، لیست دروس ارائه شده را مشاهده و دروس مورد نظر خود را انتخاب یا حذف کنند. همچنین امکان درخواست برای افزودن دروس جدید نیز وجود دارد. مدیران به پنل ویژه‌ای دسترسی دارند که از طریق آن می‌توانند گزارش‌های دقیقی از انتخاب‌های دانشجویان دریافت کرده، کاربران و دروس را مدیریت کنند.

---

### 🚀 ویژگی‌ها

#### برای کاربران:
- **✍️ ثبت‌نام آسان:** کاربران جدید می‌توانند با ارائه نام، شماره دانشجویی و شماره تماس به سادگی ثبت‌نام کنند.
- **📚 انتخاب/حذف دروس:** مشاهده لیست دروس موجود و انتخاب یا حذف آن‌ها از طریق دکمه‌های شیشه‌ای.
- **➕ درخواست درس جدید:** امکان ارسال درخواست برای افزودن یک درس جدید با ارائه کد درس.

#### برای مدیران:
- **🔑 پنل مدیریت:** دسترسی به یک پنل مدیریتی کامل برای نظارت و کنترل فرآیند انتخاب واحد.
- **📈 گزارش انتخاب دروس:** مشاهده گزارش کامل از دروسی که توسط دانشجویان انتخاب شده به همراه لیست اسامی آن‌ها.
- **📊 نمودار‌های تحلیلی:** دریافت نمودارهای گرافیکی برای هر درس بر اساس سال ورودی دانشجویان.
- **📂 خروجی اکسل (CSV):** امکان دریافت دو نوع گزارش با فرمت CSV:
    1.  آمار کلی تعداد انتخاب‌ها برای هر درس.
    2.  لیست کامل دانشجویان ثبت‌نام کرده در هر درس.
- **🧑‍🎓 مدیریت کاربران:** مشاهده لیست تمام کاربران ثبت‌نام شده در سیستم.
- **📖 مدیریت دروس:** افزودن یا حذف دروس از لیست دروس ارائه شده.
- **📝 گزارش درخواست‌ها:** مشاهده لیست دروسی که توسط کاربران برای ارائه در ترم‌های آینده پیشنهاد شده‌اند.

---

### 🛠 تکنولوژی‌های استفاده شده
- **زبان برنامه‌نویسی:** Python
- **کتابخانه ربات تلگرام:** `python-telegram-bot`
- **پایگاه داده:** قابلیت اجرا با **MySQL** یا **JSON**
- **ساخت نمودار:** `matplotlib`
- **پشتیبانی از زبان فارسی:** `arabic_reshaper` و `python-bidi`

---

### ⚙️ راه‌اندازی و نصب

۱.  ابتدا پروژه را از مخزن (repository) کلون کنید:
<div dir="ltr">

```bash
git clone <URL_REPOSITORY>
cd <DIRECTORY_NAME>
```

</div>

۲.  بسته‌های مورد نیاز پایتون را نصب کنید:
<div dir="ltr">

```bash
pip install python-telegram-bot mysql-connector-python matplotlib arabic_reshaper python-bidi
```

</div>

۳.  **پیکربندی پایگاه داده:**
    -   **MySQL (حالت پیش‌فرض):**
        -   یک پایگاه داده با نام `telegrambot` بسازید.
        -   فایل `telegrambot.sql` را در این پایگاه داده import کنید تا جداول مورد نیاز ساخته شوند.
        -   اطلاعات اتصال به پایگاه داده (نام کاربری و رمز عبور) را در فایل `manageDatabase.py` ویرایش کنید.
    -   **JSON:**
        -   در فایل `manageDatabase.py`، متغیر `DATABASE_TYPE` را به `"json"` تغییر دهید.

۴.  **توکن ربات:**
    -   توکن ربات تلگرام خود را که از **BotFather** دریافت کرده‌اید، در فایل `main.py` و در خط زیر جایگزین `"TOKEN"` کنید:
<div dir="ltr">

```python
application = ApplicationBuilder().token("TOKEN").build()
```

</div>

۵.  **اجرای ربات:**
<div dir="ltr">

```bash
python main.py
```

</div>

---

### 🗄 ساختار پایگاه داده (`telegrambot.sql`)

-   `users_data`: ذخیره اطلاعات کاربران ثبت‌نام شده (شناسه تلگرام، نام، شماره دانشجویی، شماره تماس).
-   `courses`: لیست دروس ارائه شده.
-   `course_values`: جدول ارتباطی برای مشخص کردن اینکه کدام کاربر کدام درس را انتخاب کرده است.
-   `suggested_courses`: ذخیره درخواست‌های کاربران برای دروس جدید.
